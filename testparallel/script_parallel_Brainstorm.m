% Script generated by Brainstorm (23-Dec-2019)

% Input files
sFiles = {...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial001_02.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial002_02.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial003_02.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial004_02.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial005.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial006.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial007.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial008.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial009.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial010.mat', ...
    'NewSubject/Maximum_force3_SGMx3/data_Maximum_force3_SGMx3_trial011.mat'};

% Start a new report
bst_report('Start', sFiles);
brainstorm server

parfor iFile = 1:length(sFiles)
    
    single_sFile = sFiles{iFile};

        % Process: Low-pass:40Hz
        single_sFile = bst_process('CallProcess', 'process_bandpass', single_sFile, [], ...
            'sensortypes', 'MEG, EEG', ...
            'highpass',    0, ...
            'lowpass',     40, ...
            'tranband',    0, ...
            'attenuation', 'strict', ...  % 60dB
            'ver',         '2019', ...  % 2019
            'mirror',      0, ...
            'overwrite',   0);

        % Process: DC offset correction: [-1000ms,0ms]
        single_sFile = bst_process('CallProcess', 'process_baseline', single_sFile, [], ...
            'baseline',    [-1.00024318, -0.0004915199902], ...
            'sensortypes', 'MEG, EEG', ...
            'method',      'bl', ...  % DC offset correction:    x_std = x - &mu;
            'overwrite',   1);

        % Process: Resample: 100Hz
        single_sFile = bst_process('CallProcess', 'process_resample', single_sFile, [], ...
            'freq',      100, ...
            'overwrite', 1);
        
end
   

% Save and display report
ReportFile = bst_report('Save', sFiles);
bst_report('Open', ReportFile);
% bst_report('Export', ReportFile, ExportDir);

